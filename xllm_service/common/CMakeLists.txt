include(cc_library)

cc_library(
  NAME
  common
  HDRS
    call_data.h
    closure_guard.h
    concurrent_queue.h
    global_gflags.h
    json_reader.h
    macros.h
    slice.h
    threadpool.h
    time_predictor.h
    types.h
    utils.h
    hash_util.h
    timer.h
    metrics.h
    xllm/output.h
    xllm/status.h
    xllm/uuid.h
  SRCS
    global_gflags.cpp
    json_reader.cpp
    threadpool.cpp
    time_predictor.cpp
    utils.cpp
    hash_util.cpp
    timer.cpp
    metrics.cpp
    xllm/uuid.cpp
  DEPS
    absl::random_random
    absl::strings
    glog::glog
    gflags::gflags
    nlohmann_json::nlohmann_json
    SMHasherSupport
    proto_xllm
)
add_dependencies(common brpc-static)
